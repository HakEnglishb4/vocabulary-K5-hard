<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>English Vocabulary Practice</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Poppins', sans-serif;
      }
      .animate-pulse-fast {
        animation: pulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }
      @keyframes pulse {
        0%, 100% {
          opacity: 1;
        }
        50% {
          opacity: .8;
        }
      }
    </style>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  </head>
  <body class="bg-sky-50 text-gray-800 antialiased">
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <script type="module">
      const { useState, useEffect, useMemo, useCallback, useRef } = React;

      // From services/vocabulary.ts
      const vocabularyData = [
          {
            title: "1. Vietnamese - Grade 5",
            words: [
              { english: "Synonym", vietnamese: "từ đồng nghĩa", englishExample: "'Big' is a synonym for 'large'.", vietnameseExample: "'To' là một từ đồng nghĩa của 'lớn'." },
              { english: "Similar", vietnamese: "tương tự", englishExample: "Your house is similar to mine.", vietnameseExample: "Nhà của bạn tương tự nhà của tôi." },
              { english: "Opposite", vietnamese: "trái nghĩa", englishExample: "The opposite of 'good' is 'bad'.", vietnameseExample: "Từ trái nghĩa của 'tốt' là 'xấu'." },
              { english: "right", vietnamese: "quyền", englishExample: "Everyone has the right to learn.", vietnameseExample: "Mọi người đều có quyền được học tập." },
              { english: "pay tax", vietnamese: "nộp thuế", englishExample: "Citizens must pay tax to the government.", vietnameseExample: "Công dân phải nộp thuế cho chính phủ." },
              { english: "Dash", vietnamese: "dấu gạch ngang", englishExample: "We use a dash to connect words.", vietnameseExample: "Chúng ta dùng dấu gạch ngang để nối các từ." },
              { english: "willpower", vietnamese: "ý chí / nghị lực", englishExample: "He has strong willpower to finish the race.", vietnameseExample: "Anh ấy có ý chí mạnh mẽ để hoàn thành cuộc đua." },
              { english: "Proverb", vietnamese: "tục ngữ", englishExample: "A common proverb is 'actions speak louder than words'.", vietnameseExample: "Một câu tục ngữ phổ biến là 'hành động nói lên nhiều hơn lời nói'." },
              { english: "Capitalization", vietnamese: "viết hoa", englishExample: "Proper nouns require capitalization.", vietnameseExample: "Danh từ riêng yêu cầu viết hoa." },
              { english: "original meaning", vietnamese: "nghĩa gốc", englishExample: "The original meaning of the word has changed over time.", vietnameseExample: "Nghĩa gốc của từ đã thay đổi theo thời gian." },
              { english: "transferred meaning", vietnamese: "nghĩa chuyển", englishExample: "The phrase 'a heavy heart' uses a transferred meaning.", vietnameseExample: "Cụm từ 'một trái tim nặng trĩu' sử dụng nghĩa chuyển." },
              { english: "express opinions", vietnamese: "bày tỏ ý kiến", englishExample: "You should feel free to express your opinions.", vietnameseExample: "Bạn nên thoải mái bày tỏ ý kiến của mình." },
              { english: "Exclamation", vietnamese: "câu cảm thán", englishExample: "'What a beautiful day!' is an exclamation.", vietnameseExample: "'Thật là một ngày đẹp trời!' là một câu cảm thán." },
              { english: "Period", vietnamese: "dấu chấm câu", englishExample: "End the sentence with a period.", vietnameseExample: "Hãy kết thúc câu bằng một dấu chấm câu." }
            ]
          },
          {
            title: "2. Maths - Grade 5",
            words: [
              { english: "natural number", vietnamese: "số tự nhiên", englishExample: "Five is a natural number.", vietnameseExample: "Số năm là một số tự nhiên." },
              { english: "sum", vietnamese: "tổng", englishExample: "The sum of 2 and 3 is 5.", vietnameseExample: "Tổng của 2 và 3 là 5." },
              { english: "Multiply", vietnamese: "Nhân", englishExample: "Can you multiply 4 by 5?", vietnameseExample: "Bạn có thể nhân 4 với 5 không?" },
              { english: "Divide", vietnamese: "Chia", englishExample: "Let's divide 10 by 2.", vietnameseExample: "Chúng ta hãy chia 10 cho 2." },
              { english: "subtract", vietnamese: "trừ", englishExample: "If you subtract 2 from 5, you get 3.", vietnameseExample: "Nếu bạn trừ 2 từ 5, bạn sẽ được 3." },
              { english: "add", vietnamese: "cộng", englishExample: "Let's add these two numbers together.", vietnameseExample: "Hãy cộng hai số này lại với nhau." },
              { english: "Equals", vietnamese: "bằng", englishExample: "Two plus two equals four.", vietnameseExample: "Hai cộng hai bằng bốn." },
              { english: "average", vietnamese: "trung bình", englishExample: "The average of 4, 5, and 6 is 5.", vietnameseExample: "Trung bình của 4, 5 và 6 là 5." },
              { english: "fraction", vietnamese: "phân số", englishExample: "One half is a fraction.", vietnameseExample: "Một phần hai là một phân số." },
              { english: "larger", vietnamese: "lớn hơn", englishExample: "An elephant is larger than a mouse.", vietnameseExample: "Con voi lớn hơn con chuột." },
              { english: "three quarters", vietnamese: "ba phần tư", englishExample: "I ate three quarters of the pizza.", vietnameseExample: "Tôi đã ăn ba phần tư chiếc bánh pizza." },
              { english: "two fifths", vietnamese: "hai phần năm", englishExample: "He painted two fifths of the wall.", vietnameseExample: "Anh ấy đã sơn hai phần năm bức tường." },
              { english: "one fifth", vietnamese: "một phần năm", englishExample: "She owns one fifth of the company.", vietnameseExample: "Cô ấy sở hữu một phần năm công ty." },
              { english: "compare", vietnamese: "so sánh", englishExample: "Let's compare the two pictures.", vietnameseExample: "Hãy so sánh hai bức tranh." },
              { english: "zero point seven five", vietnamese: "không phẩy bảy lăm", englishExample: "The decimal 0.75 is read as zero point seven five.", vietnameseExample: "Số thập phân 0.75 được đọc là không phẩy bảy lăm." },
              { english: "round", vietnamese: "làm tròn", englishExample: "Please round the number to the nearest ten.", vietnameseExample: "Làm ơn làm tròn số đến hàng chục gần nhất." },
              { english: "square meter", vietnamese: "mét vuông", englishExample: "The room is 20 square meters.", vietnameseExample: "Căn phòng rộng 20 mét vuông." },
              { english: "hectare", vietnamese: "héc-ta", englishExample: "The farm is over 100 hectares.", vietnameseExample: "Nông trại rộng hơn 100 héc-ta." }
            ]
          },
          {
            title: "3. History & Geography - Grade 5",
            words: [
              { english: "located", vietnamese: "vị trí", englishExample: "The school is located near the park.", vietnameseExample: "Trường học có vị trí gần công viên." },
              { english: "Southeast Asia", vietnamese: "Đông Nam Á", englishExample: "Vietnam is a country in Southeast Asia.", vietnameseExample: "Việt Nam là một quốc gia ở Đông Nam Á." },
              { english: "Europe", vietnamese: "châu Âu", englishExample: "Paris is a famous city in Europe.", vietnameseExample: "Paris là một thành phố nổi tiếng ở châu Âu." },
              { english: "Africa", vietnamese: "châu Phi", englishExample: "The Sahara Desert is in Africa.", vietnameseExample: "Sa mạc Sahara ở châu Phi." },
              { english: "border", vietnamese: "giáp với", englishExample: "Vietnam shares a border with China.", vietnameseExample: "Việt Nam giáp với Trung Quốc." },
              { english: "shape", vietnamese: "hình dạng", englishExample: "A star has a unique shape.", vietnameseExample: "Một ngôi sao có hình dạng độc đáo." },
              { english: "territory", vietnamese: "lãnh thổ", englishExample: "A country's territory includes land and water.", vietnameseExample: "Lãnh thổ của một quốc gia bao gồm đất liền và vùng nước." },
              { english: "include", vietnamese: "bao gồm", englishExample: "The price does not include tax.", vietnameseExample: "Giá không bao gồm thuế." },
              { english: "land", vietnamese: "vùng đất", englishExample: "They bought a piece of land to build a house.", vietnameseExample: "Họ đã mua một mảnh đất để xây nhà." },
              { english: "airspace", vietnamese: "vùng trời", englishExample: "Planes must get permission to enter a country's airspace.", vietnameseExample: "Máy bay phải được phép để vào không phận của một quốc gia." },
              { english: "merger", vietnamese: "sáp nhập", englishExample: "The two companies announced a merger.", vietnameseExample: "Hai công ty đã thông báo sáp nhập." },
              { english: "national flag", vietnamese: "quốc kỳ", englishExample: "The national flag of Vietnam is red with a yellow star.", vietnameseExample: "Quốc kỳ của Việt Nam màu đỏ với một ngôi sao vàng." },
              { english: "yellow star", vietnamese: "sao vàng", englishExample: "A yellow star is in the center of the flag.", vietnameseExample: "Một ngôi sao vàng ở trung tâm của lá cờ." },
              { english: "national anthem", vietnamese: "quốc ca", englishExample: "We sing the national anthem at school every Monday.", vietnameseExample: "Chúng tôi hát quốc ca ở trường mỗi thứ Hai." },
              { english: "archipelago", vietnamese: "quần đảo", englishExample: "Indonesia is a large archipelago.", vietnameseExample: "Indonesia là một quần đảo lớn." },
              { english: "belong to", vietnamese: "thuộc về", englishExample: "This book does not belong to me.", vietnameseExample: "Quyển sách này không thuộc về tôi." },
              { english: "ethnic groups", vietnamese: "dân tộc", englishExample: "Vietnam has 54 different ethnic groups.", vietnameseExample: "Việt Nam có 54 dân tộc khác nhau." },
              { english: "population", vietnamese: "dân cư", englishExample: "The population of the city is growing.", vietnameseExample: "Dân cư của thành phố đang tăng lên." },
              { english: "dense", vietnamese: "đông đúc", englishExample: "Ho Chi Minh City is very dense.", vietnameseExample: "Thành phố Hồ Chí Minh rất đông đúc." },
              { english: "plains", vietnamese: "đồng bằng", englishExample: "Many people live in the river plains.", vietnameseExample: "Nhiều người sống ở vùng đồng bằng sông." },
              { english: "coastal areas", vietnamese: "vùng ven biển", englishExample: "People in coastal areas often work as fishermen.", vietnameseExample: "Người dân ở các vùng ven biển thường làm nghề đánh cá." },
              { english: "desert", vietnamese: "sa mạc", englishExample: "Camels can live in the desert.", vietnameseExample: "Lạc đà có thể sống ở sa mạc." }
            ]
          },
          {
            title: "4. Music - Grade 5",
            words: [
              { english: "My joy", vietnamese: "Niềm vui của em", englishExample: "Music is my joy.", vietnameseExample: "Âm nhạc là niềm vui của em." },
              { english: "Sparkling", vietnamese: "lấp lánh", englishExample: "The stars are sparkling in the sky.", vietnameseExample: "Những ngôi sao đang lấp lánh trên bầu trời." },
              { english: "Dewdrop", vietnamese: "giọt sương", englishExample: "A dewdrop is on the leaf.", vietnameseExample: "Một giọt sương đọng trên chiếc lá." },
              { english: "Sound", vietnamese: "âm thanh", englishExample: "I can hear the sound of the rain.", vietnameseExample: "Tôi có thể nghe thấy âm thanh của mưa." },
              { english: "Move", vietnamese: "di chuyển", englishExample: "Please move your chair.", vietnameseExample: "Làm ơn di chuyển ghế của bạn." },
              { english: "Stomp", vietnamese: "dậm", englishExample: "Don't stomp your feet in the house.", vietnameseExample: "Đừng dậm chân trong nhà." },
              { english: "Melody", vietnamese: "giai điệu", englishExample: "This song has a beautiful melody.", vietnameseExample: "Bài hát này có giai điệu thật hay." },
              { english: "Instrument", vietnamese: "nhạc cụ", englishExample: "The piano is a musical instrument.", vietnameseExample: "Đàn piano là một loại nhạc cụ." },
              { english: "Flute", vietnamese: "sáo", englishExample: "She plays the flute very well.", vietnameseExample: "Cô ấy chơi sáo rất hay." },
              { english: "Drum", vietnamese: "trống", englishExample: "He is learning to play the drum.", vietnameseExample: "Cậu ấy đang học chơi trống." },
              { english: "Keyboard", vietnamese: "bàn phím", englishExample: "My computer has a new keyboard.", vietnameseExample: "Máy tính của tôi có một bàn phím mới." },
              { english: "Electronic keyboard", vietnamese: "đàn phím điện tử", englishExample: "She practices on her electronic keyboard every day.", vietnameseExample: "Cô ấy luyện tập trên cây đàn điện tử của mình mỗi ngày." }
            ]
          },
          {
            title: "5. Physical Education",
            words: [
              { english: "Vertical line", vietnamese: "Hàng dọc", englishExample: "Please stand in a vertical line.", vietnameseExample: "Làm ơn hãy đứng thành một hàng dọc." },
              { english: "Horizontal line", vietnamese: "Hàng ngang", englishExample: "Draw a horizontal line on the paper.", vietnameseExample: "Hãy vẽ một đường ngang trên giấy." },
              { english: "Player", vietnamese: "Cầu thủ", englishExample: "He is a famous football player.", vietnameseExample: "Anh ấy là một cầu thủ bóng đá nổi tiếng." },
              { english: "Formation", vietnamese: "Đội hình", englishExample: "The team practiced their new formation.", vietnameseExample: "Đội đã luyện tập đội hình mới của họ." }
            ]
          },
          {
            title: "6. Art",
            words: [
              { english: "special", vietnamese: "đặc biệt", englishExample: "Today is a special day.", vietnameseExample: "Hôm nay là một ngày đặc biệt." },
              { english: "features", vietnamese: "đặc điểm", englishExample: "This phone has many new features.", vietnameseExample: "Chiếc điện thoại này có nhiều đặc điểm mới." },
              { english: "landscape", vietnamese: "phong cảnh", englishExample: "He painted a beautiful landscape.", vietnameseExample: "Anh ấy đã vẽ một bức tranh phong cảnh tuyệt đẹp." },
              { english: "images", vietnamese: "hình ảnh", englishExample: "The book has many colorful images.", vietnameseExample: "Quyển sách có nhiều hình ảnh đầy màu sắc." },
              { english: "traditional", vietnamese: "truyền thống", englishExample: "Ao Dai is a traditional dress of Vietnam.", vietnameseExample: "Áo Dài là trang phục truyền thống của Việt Nam." },
              { english: "costumes", vietnamese: "trang phục", englishExample: "The actors wore beautiful costumes.", vietnameseExample: "Các diễn viên mặc trang phục rất đẹp." },
              { english: "opinion", vietnamese: "ý kiến", englishExample: "What is your opinion on this matter?", vietnameseExample: "Ý kiến của bạn về vấn đề này là gì?" },
              { english: "friendship", vietnamese: "tình bạn", englishExample: "Their friendship is very strong.", vietnameseExample: "Tình bạn của họ rất bền chặt." },
              { english: "Sharing", vietnamese: "Chia sẻ", englishExample: "Sharing toys with friends is fun.", vietnameseExample: "Chia sẻ đồ chơi với bạn bè rất vui." },
            ]
          },
          {
            title: "7. Information Technology",
            words: [
              { english: "change colour", vietnamese: "thay đổi màu sắc", englishExample: "You can change the colour of the text.", vietnameseExample: "Bạn có thể thay đổi màu sắc của văn bản." },
              { english: "create", vietnamese: "tạo ra", englishExample: "Let's create a new folder.", vietnameseExample: "Hãy tạo một thư mục mới." },
              { english: "create a new page", vietnamese: "tạo trang mới", englishExample: "I will create a new page for our project.", vietnameseExample: "Tôi sẽ tạo một trang mới cho dự án của chúng ta." },
              { english: "character", vietnamese: "nhân vật", englishExample: "My favorite cartoon character is Doraemon.", vietnameseExample: "Nhân vật hoạt hình yêu thích của tôi là Doraemon." },
              { english: "software", vietnamese: "phần mềm", englishExample: "We need to install this software on the computer.", vietnameseExample: "Chúng ta cần cài đặt phần mềm này trên máy tính." }
            ]
          },
          {
            title: "8. Technology - Grade 5",
            words: [
              { english: "product of Technology", vietnamese: "sản phẩm công nghệ", englishExample: "A smartphone is a product of technology.", vietnameseExample: "Điện thoại thông minh là một sản phẩm của công nghệ." },
              { english: "natural object", vietnamese: "đối tượng thiên nhiên", englishExample: "A tree is a natural object.", vietnameseExample: "Cây là một đối tượng thiên nhiên." },
              { english: "means of transport", vietnamese: "Phương tiện giao thông", englishExample: "A bus is a means of transport.", vietnameseExample: "Xe buýt là một phương tiện giao thông." },
              { english: "calculator", vietnamese: "máy tính cầm tay", englishExample: "I use a calculator to do math.", vietnameseExample: "Tôi dùng máy tính cầm tay để làm toán." },
              { english: "Help to learn", vietnamese: "giúp học tập", englishExample: "Computers can help us to learn.", vietnameseExample: "Máy tính có thể giúp chúng ta học tập." },
              { english: "Help to move", vietnamese: "giúp di chuyển", englishExample: "Cars help people to move faster.", vietnameseExample: "Ô tô giúp con người di chuyển nhanh hơn." }
            ]
          },
          {
            title: "9. Life Skills",
            words: [
              { english: "Share", vietnamese: "chia sẻ", englishExample: "It's nice to share your snacks with friends.", vietnameseExample: "Thật tốt khi chia sẻ đồ ăn vặt của bạn với bạn bè." },
              { english: "Personal information", vietnamese: "thông tin cá nhân", englishExample: "Don't share your personal information online.", vietnameseExample: "Đừng chia sẻ thông tin cá nhân của bạn trên mạng." },
              { english: "Password", vietnamese: "mật khẩu", englishExample: "You should create a strong password.", vietnameseExample: "Bạn nên tạo một mật khẩu mạnh." },
              { english: "Upload", vietnamese: "tải lên", englishExample: "I will upload the photos later.", vietnameseExample: "Tôi sẽ tải ảnh lên sau." },
              { english: "download", vietnamese: "tải xuống", englishExample: "You can download the file from this link.", vietnameseExample: "Bạn có thể tải tệp xuống từ liên kết này." },
              { english: "different ideas", vietnamese: "ý kiến khác nhau", englishExample: "We have different ideas, but we are still friends.", vietnameseExample: "Chúng tôi có những ý kiến khác nhau, nhưng chúng tôi vẫn là bạn." },
              { english: "Argue", vietnamese: "tranh luận", englishExample: "It is not good to argue with your friends.", vietnameseExample: "Tranh luận với bạn bè là không tốt." },
              { english: "Sneer", vietnamese: "chế giễu", englishExample: "You should not sneer at others' mistakes.", vietnameseExample: "Bạn không nên chế giễu lỗi lầm của người khác." },
              { english: "Exchange ideas", vietnamese: "trao đổi ý kiến", englishExample: "Let's exchange ideas for the project.", vietnameseExample: "Hãy trao đổi ý kiến cho dự án." },
              { english: "Invite", vietnamese: "mời", englishExample: "I want to invite you to my birthday party.", vietnameseExample: "Tôi muốn mời bạn đến bữa tiệc sinh nhật của tôi." },
              { english: "Agree", vietnamese: "đồng ý", englishExample: "I agree with your idea.", vietnameseExample: "Tôi đồng ý với ý kiến của bạn." },
              { english: "Curious", vietnamese: "tò mò", englishExample: "The cat is curious about the new toy.", vietnameseExample: "Con mèo tò mò về món đồ chơi mới." },
              { english: "Stranger", vietnamese: "người lạ", englishExample: "Don't talk to a stranger.", vietnameseExample: "Đừng nói chuyện với người lạ." }
            ]
          }
      ];

      // From components/constants.tsx
      const topicColors = [
          'bg-rose-100 border-rose-300 hover:bg-rose-200 text-rose-800 focus:ring-rose-500',
          'bg-blue-100 border-blue-300 hover:bg-blue-200 text-blue-800 focus:ring-blue-500',
          'bg-cyan-100 border-cyan-300 hover:bg-cyan-200 text-cyan-800 focus:ring-cyan-500',
          'bg-amber-100 border-amber-300 hover:bg-amber-200 text-amber-800 focus:ring-amber-500',
          'bg-violet-100 border-violet-300 hover:bg-violet-200 text-violet-800 focus:ring-violet-500',
          'bg-fuchsia-100 border-fuchsia-300 hover:bg-fuchsia-200 text-fuchsia-800 focus:ring-fuchsia-500',
          'bg-emerald-100 border-emerald-300 hover:bg-emerald-200 text-emerald-800 focus:ring-emerald-500',
          'bg-sky-100 border-sky-300 hover:bg-sky-200 text-sky-800 focus:ring-sky-500',
          'bg-lime-100 border-lime-300 hover:bg-lime-200 text-lime-800 focus:ring-lime-500',
          'bg-orange-100 border-orange-300 hover:bg-orange-200 text-orange-800 focus:ring-orange-500',
          'bg-teal-100 border-teal-300 hover:bg-teal-200 text-teal-800 focus:ring-teal-500',
          'bg-indigo-100 border-indigo-300 hover:bg-indigo-200 text-indigo-800 focus:ring-indigo-500',
          'bg-pink-100 border-pink-300 hover:bg-pink-200 text-pink-800 focus:ring-pink-500',
          'bg-yellow-100 border-yellow-300 hover:bg-yellow-200 text-yellow-800 focus:ring-yellow-500',
          'bg-green-100 border-green-300 hover:bg-green-200 text-green-800 focus:ring-green-500',
          'bg-gray-100 border-gray-300 hover:bg-gray-200 text-gray-800 focus:ring-gray-500',
      ];
      
      // From components/icons/
      const SpeakerIcon = () => React.createElement(
        "svg", { xmlns: "http://www.w3.org/2000/svg", className: "h-8 w-8", fill: "none", viewBox: "0 0 24 24", stroke: "currentColor" },
        React.createElement("path", { strokeLinecap: "round", strokeLinejoin: "round", strokeWidth: 2, d: "M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" })
      );

      const TrophyIcon = () => React.createElement(
        "svg", { xmlns: "http://www.w3.org/2000/svg", className: "h-16 w-16", viewBox: "0 0 20 20", fill: "currentColor" },
        React.createElement("path", { fillRule: "evenodd", clipRule: "evenodd", d: "M10 2a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0110 2zM5.028 4.093a.75.75 0 01.996.115l.89 1.112a.75.75 0 01-1.22.976l-.89-1.113a.75.75 0 01.224-1.09zm9.944 0a.75.75 0 011.218 1.09l-.89 1.113a.75.75 0 11-1.22-.976l.892-1.112a.75.75 0 01-.001-.115zM15 8a1 1 0 00-1 1v2.162c0 .444-.33.816-.757.876a2.5 2.5 0 01-2.486-2.486C10.816 9.33 11.188 9 11.632 9H12a1 1 0 100-2h-2.162c-.444 0-.816.33-.876.757a2.5 2.5 0 002.486 2.486c.06.527.432.899.876 1.14v3.37c0 .444.33.816.757.876a2.5 2.5 0 002.486-2.486C16.184 14.67 15.812 14 15.368 14H15a1 1 0 100-2h.368c.444 0 .816-.33.876-.757a2.5 2.5 0 00-2.486-2.486c-.527-.06-.899-.432-1.14-.876H8.368a2.502 2.502 0 00-2.486 2.486c.06.527.432.899.876 1.14v3.37c0 .444-.33.816-.757.876a2.5 2.5 0 01-2.486-2.486C3.816 14.67 4.188 14 4.632 14H5a1 1 0 110-2h-.368a2.502 2.502 0 01-2.486-2.486c.06-.527.432-.899.876-1.14H5a1 1 0 110-2h-.368c-.444 0-.816.33-.876.757A2.5 2.5 0 003.75 12a1 1 0 102 0V9a1 1 0 00-1-1H3a1 1 0 000 2h.368c.444 0 .816-.33.876-.757a2.5 2.5 0 012.486-2.486c.527.06.899.432 1.14.876h3.252c.241-.444.613-.816 1.14-.876a2.5 2.5 0 012.486 2.486c-.06.527-.432.899-.876 1.14H15a1 1 0 000-2zm-5 6a1 1 0 100 2h.368c.444 0 .816-.33.876-.757a2.5 2.5 0 00-2.486-2.486C8.228 13.184 7.856 14 7.28 14H7a1 1 0 000 2h.28a2.5 2.5 0 002.486-2.486c.06-.527.432-.899.876-1.14v-2.75c-.444-.241-.816-.613-1.14-.876a2.5 2.5 0 00-2.486-2.486C6.703 6.19 6.33 6.562 6.28 7H7a1 1 0 100-2H6.28C6.33 4.438 6.703 4.066 7.219 4c.517-.066 1.04.14 1.414.514a.75.75 0 01-1.06 1.06A.998.998 0 007 6a1 1 0 100 2h.28c.576 0 .948.572.876 1.14A2.5 2.5 0 0010.642 11h.726a2.5 2.5 0 002.486-2.486C13.916 8.572 13.544 8 12.968 8h-.28a1 1 0 100 2h.28c.576 0 .948-.572.876-1.14a2.5 2.5 0 00-2.486-2.486c-.066.517.14 1.04.514 1.414a.75.75 0 01-1.06 1.06A.998.998 0 0012 10a1 1 0 100-2h.28c.576 0 .948-.572.876 1.14a2.5 2.5 0 002.486 2.486c.066-.517-.14-1.04-.514-1.414a.75.75 0 011.06-1.06c.374.374.58.897.514 1.414.066.517-.14-1.04-.514 1.414a.75.75 0 11-1.06-1.06c.062-.062.112-.13.15-.204a1 1 0 00-1.7-.708A1.002 1.002 0 0014 13v.368c0 .444.33.816.757.876a2.5 2.5 0 002.486-2.486C17.184 11.184 16.812 11 16.368 11H16a1 1 0 100 2h.368c.444 0 .816.33.876.757a2.5 2.5 0 01-2.486 2.486c-.527-.06-1.14-.432-1.14-1.375V12a1 1 0 10-2 0v2.368c0 .444.33.816.757.876A2.5 2.5 0 0015 12a1 1 0 100-2h-.368c-.444 0-.816-.33-.876-.757a2.5 2.5 0 012.486-2.486c.527.06.899.432 1.14.876H15a1 1 0 100-2z" })
      );
      
      // From components/
      const WelcomeScreen = ({ onNameSubmit }) => {
          const [name, setName] = useState('');

          const handleSubmit = (e) => {
              e.preventDefault();
              if (name.trim()) {
                  onNameSubmit(name.trim());
              }
          };

          return React.createElement(
              "div", { className: "flex flex-col items-center justify-center min-h-screen p-4 text-center" },
              React.createElement(
                  "div", { className: "w-full max-w-md bg-white rounded-2xl shadow-2xl p-8 border border-gray-200" },
                  React.createElement("h1", { className: "text-4xl font-bold text-sky-600 mb-2" }, "Vocabulary Challenge"),
                  React.createElement("p", { className: "text-gray-600 mb-8" }, "Enter your name to start learning!"),
                  React.createElement(
                      "form", { onSubmit: handleSubmit, className: "flex flex-col gap-4" },
                      React.createElement("input", {
                          type: "text",
                          value: name,
                          onChange: (e) => setName(e.target.value),
                          placeholder: "Your Name",
                          className: "w-full p-4 text-center text-lg bg-gray-100 border-2 border-gray-300 rounded-lg text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition-all duration-200",
                          maxLength: 20,
                          autoFocus: true
                      }),
                      React.createElement(
                          "button", {
                              type: "submit",
                              disabled: !name.trim(),
                              className: "w-full p-4 bg-sky-500 text-white font-bold rounded-lg hover:bg-sky-600 transition-transform hover:scale-105 transform duration-200 disabled:bg-gray-200 disabled:text-gray-400 disabled:cursor-not-allowed disabled:scale-100"
                          },
                          "Start Learning"
                      )
                  )
              )
          );
      };

      const TopicSelector = ({ playerName, onSelectTopic }) => {
          return React.createElement(
              "div", { className: "flex flex-col items-center min-h-screen p-4" },
              React.createElement(
                  "div", { className: "w-full max-w-6xl text-center py-8" },
                  React.createElement("h1", { className: "text-3xl md:text-4xl font-bold text-gray-800 mb-2" }, `Welcome, ${playerName}!`),
                  React.createElement("p", { className: "text-lg text-gray-600 mb-8" }, "Choose a topic to begin your challenge."),
                  React.createElement("div", { className: "grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4" },
                      vocabularyData.map((topic, index) =>
                          React.createElement(
                              "button", {
                                  key: index,
                                  onClick: () => onSelectTopic(topic),
                                  className: `p-4 rounded-lg shadow-md border hover:scale-105 transform transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-opacity-75 ${topicColors[index % topicColors.length]}`
                              },
                              React.createElement("h2", { className: "text-lg font-semibold" }, topic.title),
                              React.createElement("p", { className: "mt-1 opacity-80" }, `${topic.words.length} words`)
                          )
                      )
                  )
              )
          );
      };
      
      const WrongAnswersModal = ({ isOpen, onClose, mistakes, onPracticeMistakes }) => {
          if (!isOpen) return null;

          return React.createElement(
              "div", { className: "fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50", onClick: onClose },
              React.createElement(
                  "div", { className: "bg-white rounded-lg shadow-xl w-full max-w-lg max-h-[80vh] flex flex-col", onClick: (e) => e.stopPropagation() },
                  React.createElement(
                      "div", { className: "p-6 border-b border-gray-200 sticky top-0 bg-white" },
                      React.createElement("h2", { className: "text-2xl font-bold text-gray-800" }, "Words to Review"),
                      React.createElement("p", { className: "text-gray-500" }, "Here are the words you had trouble with.")
                  ),
                  React.createElement(
                      "div", { className: "p-6 overflow-y-auto" },
                      mistakes.length === 0
                          ? React.createElement("p", { className: "text-center text-gray-500 py-8" }, "No mistakes yet. Great job!")
                          : React.createElement(
                              "ul", { className: "divide-y divide-gray-200" },
                              mistakes.map((mistake, index) =>
                                  React.createElement(
                                      "li", { key: index, className: "py-4 flex flex-col items-start select-none", onContextMenu: (e) => e.preventDefault() },
                                      React.createElement(
                                          "div", { className: "flex justify-between items-center w-full" },
                                          React.createElement("span", { className: "text-lg text-gray-800 font-medium" }, mistake.word.english),
                                          React.createElement("span", { className: "text-gray-600" }, mistake.word.vietnamese)
                                      ),
                                      mistake.sentenceErrorCount > 0 && React.createElement("p", { className: "text-sm font-semibold text-red-600 mt-1" }, `Sentence mistakes: ${mistake.sentenceErrorCount}`),
                                      mistake.word.englishExample && React.createElement("p", { className: "text-sm text-gray-500 mt-1 italic" }, `e.g., "${mistake.word.englishExample}"`)
                                  )
                              )
                          )
                  ),
                  React.createElement(
                      "div", { className: "p-6 border-t border-gray-200 sticky bottom-0 bg-white space-y-2" },
                      React.createElement(
                          "button", {
                              onClick: onPracticeMistakes,
                              disabled: mistakes.length === 0,
                              className: "w-full p-3 bg-amber-500 text-white font-bold rounded-lg hover:bg-amber-600 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed"
                          },
                          `Practice Mistakes (${mistakes.length})`
                      ),
                      React.createElement(
                          "button", {
                              onClick: onClose,
                              className: "w-full p-3 bg-sky-500 text-white font-bold rounded-lg hover:bg-sky-600 transition-colors"
                          },
                          "Close"
                      )
                  )
              )
          );
      };
      
      const GameSummary = ({ score, total, onShowWrongAnswers, onNextTopic, onReturnToMenu, onPracticeMistakes, mistakesCount }) => {
          return React.createElement(
              "div", { className: "flex flex-col items-center justify-center min-h-screen p-4" },
              React.createElement(
                  "div", { className: "w-full max-w-md bg-white rounded-2xl shadow-2xl p-8 text-center border border-gray-200" },
                  React.createElement("div", { className: "flex justify-center text-sky-400 mb-4" }, React.createElement(TrophyIcon)),
                  React.createElement("h1", { className: "text-3xl font-bold text-sky-600 mb-2" }, "Topic Complete!"),
                  React.createElement("p", { className: "text-gray-600 mb-6" }, "Great job! Here's how you did."),
                  React.createElement(
                      "div", { className: "my-8" },
                      React.createElement("p", { className: "text-lg text-gray-800" }, "Your Score"),
                      React.createElement("p", { className: "text-6xl font-bold text-green-500" },
                          score,
                          React.createElement("span", { className: "text-3xl text-gray-500" }, `/${total}`)
                      )
                  ),
                  React.createElement(
                      "div", { className: "space-y-3" },
                      React.createElement("button", { onClick: onNextTopic, className: "w-full p-4 bg-sky-500 text-white font-bold rounded-lg hover:bg-sky-600 transition-transform hover:scale-105 transform duration-200" }, "Continue to Next Topic"),
                      mistakesCount > 0 && React.createElement("button", { onClick: onPracticeMistakes, className: "w-full p-4 bg-amber-500 text-white font-bold rounded-lg hover:bg-amber-600 transition-transform hover:scale-105 transform duration-200" }, `Practice ${mistakesCount} Mistake(s)`),
                      React.createElement("button", { onClick: onShowWrongAnswers, className: "w-full p-4 bg-gray-200 text-gray-800 font-bold rounded-lg hover:bg-gray-300 transition-transform hover:scale-105 transform duration-200" }, "Review Mistakes"),
                      React.createElement("button", { onClick: onReturnToMenu, className: "w-full p-3 bg-transparent text-gray-600 font-bold rounded-lg hover:bg-gray-100 transition-colors" }, "Back to Main Menu")
                  )
              )
          );
      };
      
      const Game = ({ topic, onReturnToMenu, onNextTopic, onStartPractice }) => {
          const words = useMemo(() => [...topic.words].sort(() => 0.5 - Math.random()), [topic]);

          const [currentWordIndex, setCurrentWordIndex] = useState(0);
          const [userInput, setUserInput] = useState('');
          const [score, setScore] = useState(0);
          const [attempts, setAttempts] = useState(1);
          const [wrongAnswers, setWrongAnswers] = useState([]);
          const [isFinished, setIsFinished] = useState(false);
          const [showHint, setShowHint] = useState(false);
          const [isHintVisible, setIsHintVisible] = useState(false);
          const [showWrongAnswersModal, setShowWrongAnswersModal] = useState(false);
          const [feedback, setFeedback] = useState(null);
          const [gameStage, setGameStage] = useState('word');
          const [isPreviewVisible, setIsPreviewVisible] = useState(false);
          const inputRef = useRef(null);

          const currentWord = words[currentWordIndex];

          const speak = useCallback((text, onEndCallback = null) => {
              if ('speechSynthesis' in window) {
                  window.speechSynthesis.cancel();
                  const utterance = new SpeechSynthesisUtterance(text);
                  utterance.lang = 'en-US';
                  if (onEndCallback) {
                      utterance.onend = onEndCallback;
                  }
                  window.speechSynthesis.speak(utterance);
              } else if (onEndCallback) {
                  onEndCallback();
              }
          }, []);

          useEffect(() => {
              if (currentWord) {
                  const textToSpeak = gameStage === 'word' ? currentWord.english : (currentWord.englishExample || '');
                  if (textToSpeak) {
                      setIsPreviewVisible(true);
                      const playSecondTimeAndHide = () => {
                          speak(textToSpeak, () => {
                              setIsPreviewVisible(false);
                              inputRef.current?.focus();
                          });
                      };
                      speak(textToSpeak, playSecondTimeAndHide);
                  } else {
                      setIsPreviewVisible(false);
                      inputRef.current?.focus();
                  }
              }
              return () => {
                  if ('speechSynthesis' in window) {
                      window.speechSynthesis.cancel();
                  }
              };
          }, [currentWord, gameStage, speak]);

          useEffect(() => {
              if (feedback) {
                  const timer = setTimeout(() => setFeedback(null), 2500);
                  return () => clearTimeout(timer);
              }
          }, [feedback]);

          const handleNextWord = useCallback(() => {
              if (currentWordIndex < words.length - 1) {
                  setCurrentWordIndex(prev => prev + 1);
                  setUserInput('');
                  setAttempts(1);
                  setShowHint(false);
                  setFeedback(null);
                  setGameStage('word');
              } else {
                  setIsFinished(true);
              }
          }, [currentWordIndex, words.length]);

          const handleTransitionToSentence = useCallback(() => {
              if (currentWord?.englishExample) {
                  setGameStage('sentence');
                  setUserInput('');
                  setFeedback(null);
                  setAttempts(1);
                  setShowHint(false);
              } else {
                  handleNextWord();
              }
          }, [currentWord, handleNextWord]);
          
          const normalizeSentence = (str) => str.trim().toLowerCase().replace(/[.,!?]/g, '').replace(/[\u2018\u2019']/g, "'");

          const handleSubmit = (e) => {
              e.preventDefault();
              if (!userInput.trim() || feedback || !currentWord) return;

              if (gameStage === 'word') {
                  const isCorrect = normalizeSentence(userInput) === normalizeSentence(currentWord.english);
                  if (isCorrect) {
                      setFeedback({ type: 'correct', message: 'Correct!', example: currentWord.englishExample });
                      if (attempts === 1) {
                          setScore(prev => prev + 1);
                      }
                      setTimeout(handleTransitionToSentence, 2500);
                  } else {
                      setFeedback({ type: 'incorrect', message: 'Incorrect, try again!' });
                      if (attempts === 1) {
                          setWrongAnswers(prev => {
                              if (!prev.some(m => m.word.english === currentWord.english)) {
                                  return [...prev, { word: currentWord, sentenceErrorCount: 0 }];
                              }
                              return prev;
                          });
                      }
                      setAttempts(prev => prev + 1);
                      setShowHint(true);
                  }
              } else {
                  if (!currentWord.englishExample) return;
                  const isCorrect = normalizeSentence(userInput) === normalizeSentence(currentWord.englishExample);
                  if (isCorrect) {
                      setFeedback({ type: 'correct', message: 'Excellent!' });
                      setTimeout(handleNextWord, 1000);
                  } else {
                      setFeedback({ type: 'incorrect', message: 'Not quite, listen again!' });
                      setAttempts(prev => prev + 1);
                      setShowHint(true);
                      setWrongAnswers(prev => {
                          const existingMistakeIndex = prev.findIndex(m => m.word.english === currentWord.english);
                          if (existingMistakeIndex > -1) {
                              const updatedMistakes = [...prev];
                              updatedMistakes[existingMistakeIndex].sentenceErrorCount += 1;
                              return updatedMistakes;
                          } else {
                              return [...prev, { word: currentWord, sentenceErrorCount: 1 }];
                          }
                      });
                  }
              }
          };

          const handleListenAgain = useCallback(() => {
              if (!currentWord) return;
              const textToSpeak = gameStage === 'word' ? currentWord.english : (currentWord.englishExample || '');
              if (textToSpeak) {
                  setIsPreviewVisible(true);
                  speak(textToSpeak, () => {
                      setIsPreviewVisible(false);
                      inputRef.current?.focus();
                  });
              }
          }, [currentWord, gameStage, speak]);

          const handlePracticeMistakes = () => {
              if (wrongAnswers.length > 0) {
                  setShowWrongAnswersModal(false);
                  onStartPractice(wrongAnswers);
              }
          };
          
          if (isFinished) {
              return React.createElement(
                React.Fragment, null,
                React.createElement(GameSummary, { score: score, total: words.length, onShowWrongAnswers: () => setShowWrongAnswersModal(true), onNextTopic: onNextTopic, onReturnToMenu: onReturnToMenu, onPracticeMistakes: handlePracticeMistakes, mistakesCount: wrongAnswers.length }),
                React.createElement(WrongAnswersModal, { isOpen: showWrongAnswersModal, onClose: () => setShowWrongAnswersModal(false), mistakes: wrongAnswers, onPracticeMistakes: handlePracticeMistakes })
              );
          }

          if (!currentWord) {
              return React.createElement("div", { className: "text-center p-8" }, "Loading topic...");
          }
          
          const getInputBorderColor = () => {
              if (!feedback) return 'border-gray-300 focus:border-sky-500';
              return feedback.type === 'correct' ? 'border-green-500 animate-pulse-fast' : 'border-red-500 animate-pulse-fast';
          }

          const progressPercentage = (currentWordIndex / words.length) * 100;

          return React.createElement(
              "div", { className: "flex flex-col items-center justify-center min-h-screen p-4" },
              React.createElement(
                  "div", { className: "w-full max-w-xl bg-white rounded-2xl shadow-2xl p-6 md:p-8 relative overflow-hidden border border-gray-200" },
                  React.createElement("div", { className: "w-full bg-gray-200 rounded-full h-2.5 absolute top-0 left-0" },
                      React.createElement("div", { className: "bg-sky-400 h-2.5 rounded-full", style: { width: `${progressPercentage}%`, transition: 'width 0.5s ease-in-out' } })
                  ),
                  React.createElement("div", { className: "absolute top-4 left-4" },
                      React.createElement("button", { onClick: onReturnToMenu, className: "text-gray-500 hover:text-sky-600 transition-colors text-sm" }, "← Change Topic")
                  ),
                  React.createElement("div", { className: "absolute top-4 right-4" },
                      React.createElement("button", { onClick: () => setShowWrongAnswersModal(true), className: "text-gray-500 hover:text-sky-600 transition-colors text-sm" }, `Mistakes (${wrongAnswers.length})`)
                  ),
                  React.createElement("div", { className: "text-center mt-12" },
                      React.createElement("h2", { className: "text-2xl font-bold text-sky-600 mb-2" }, topic.title),
                      React.createElement("p", { className: "text-gray-500" }, `Word ${currentWordIndex + 1} of ${words.length} • Score: ${score}`)
                  ),
                  React.createElement("div", { className: "my-8 text-center min-h-[160px] flex flex-col justify-center items-center select-none", onContextMenu: (e) => e.preventDefault() },
                      isPreviewVisible ? (
                          gameStage === 'word' ? (
                              React.createElement(React.Fragment, null,
                                  React.createElement("p", { className: "text-4xl md:text-5xl font-semibold text-sky-700 mb-2 animate-pulse-fast" }, currentWord.english),
                                  React.createElement("p", { className: "text-lg text-gray-500" }, `(${currentWord.vietnamese})`)
                              )
                          ) : (
                              React.createElement(React.Fragment, null,
                                  React.createElement("p", { className: "text-2xl text-sky-700 mb-2 italic animate-pulse-fast" }, `"${currentWord.englishExample}"`),
                                  currentWord.vietnameseExample && React.createElement("p", { className: "text-lg text-gray-500" }, `(${currentWord.vietnameseExample})`)
                              )
                          )
                      ) : (
                          gameStage === 'word' ? (
                              React.createElement(React.Fragment, null,
                                  React.createElement("p", { className: "text-4xl md:text-5xl font-semibold text-gray-900 mb-2" }, currentWord.vietnamese),
                                  currentWord.vietnameseExample && React.createElement("p", { className: "text-xl text-gray-500 mt-2 italic" }, `"${currentWord.vietnameseExample}"`)
                              )
                          ) : (
                              React.createElement(React.Fragment, null,
                                  React.createElement("p", { className: "text-2xl font-semibold text-gray-800 mb-2" }, "Listen and type the sentence:"),
                                  currentWord.vietnameseExample && React.createElement("p", { className: "text-2xl text-gray-700 mb-2 italic" }, `"${currentWord.vietnameseExample}"`),
                                  React.createElement("p", { className: "text-lg text-gray-500" }, `(${currentWord.english} - ${currentWord.vietnamese})`)
                              )
                          )
                      ),
                      React.createElement("button", { onClick: handleListenAgain, className: "text-gray-500 hover:text-sky-500 transition-colors p-2 rounded-full active:scale-90 transform mt-2" },
                          React.createElement(SpeakerIcon)
                      )
                  ),
                  React.createElement("form", { onSubmit: handleSubmit, className: "space-y-4" },
                      React.createElement("input", {
                          ref: inputRef,
                          type: "text",
                          value: userInput,
                          onChange: (e) => setUserInput(e.target.value),
                          placeholder: gameStage === 'word' ? "Type the English word..." : "Type the English sentence...",
                          className: `w-full p-4 text-center text-lg bg-gray-100 border-2 rounded-lg text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-sky-500 transition-all duration-200 ${getInputInputBorderColor()}`,
                          autoCapitalize: "none",
                          autoComplete: "off",
                          autoCorrect: "off"
                      }),
                      React.createElement("button", { type: "submit", className: "w-full p-4 bg-sky-500 text-white font-bold rounded-lg hover:bg-sky-600 transition-transform hover:scale-105 transform duration-200 disabled:bg-gray-200 disabled:cursor-not-allowed disabled:scale-100" }, "Submit")
                  ),
                  React.createElement("div", { className: "mt-4 min-h-[48px] flex items-center justify-center" },
                      showHint && !feedback && (
                          React.createElement("div", { className: "relative" },
                              React.createElement("button", {
                                  onMouseDown: () => setIsHintVisible(true),
                                  onMouseUp: () => setIsHintVisible(false),
                                  onTouchStart: () => setIsHintVisible(true),
                                  onTouchEnd: () => setIsHintVisible(false),
                                  onMouseLeave: () => setIsHintVisible(false),
                                  className: "px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-colors"
                              }, "Hold for Hint"),
                              isHintVisible && React.createElement("div", { className: "absolute bottom-full mb-2 left-1/2 -translate-x-1/2 bg-white p-3 rounded-lg border border-gray-300 shadow-lg z-10 select-none" },
                                  React.createElement("p", { className: "text-amber-700 font-mono whitespace-nowrap" }, gameStage === 'word' ? currentWord.english : currentWord.englishExample)
                              )
                          )
                      ),
                      feedback && React.createElement(
                          "div", { className: "text-center" },
                          React.createElement("p", { className: `text-lg font-semibold ${feedback.type === 'correct' ? 'text-green-500' : 'text-red-500'}` }, feedback.message),
                          feedback.example && React.createElement("p", { className: "text-lg text-gray-500 mt-1 italic" }, `e.g., "${feedback.example}"`)
                      )
                  )
              ),
              React.createElement(WrongAnswersModal, { isOpen: showWrongAnswersModal, onClose: () => setShowWrongAnswersModal(false), mistakes: wrongAnswers, onPracticeMistakes: handlePracticeMistakes })
          );
      };
      
      const App = () => {
          const [playerName, setPlayerName] = useState(() => localStorage.getItem('playerName') || '');
          const [currentTopic, setCurrentTopic] = useState(null);
          const [topicIndex, setTopicIndex] = useState(null);

          const handleNameSubmit = useCallback((name) => {
              localStorage.setItem('playerName', name);
              setPlayerName(name);
          }, []);

          const handleSelectTopic = useCallback((topic) => {
              const index = vocabularyData.findIndex(t => t.title === topic.title);
              setCurrentTopic(topic);
              setTopicIndex(index);
          }, []);

          const handleReturnToMenu = useCallback(() => {
              setCurrentTopic(null);
              setTopicIndex(null);
          }, []);

          const handleNextTopic = useCallback(() => {
              if (topicIndex !== null && topicIndex !== -1 && topicIndex < vocabularyData.length - 1) {
                  const nextIndex = topicIndex + 1;
                  setCurrentTopic(vocabularyData[nextIndex]);
                  setTopicIndex(nextIndex);
              } else {
                  handleReturnToMenu();
              }
          }, [topicIndex, handleReturnToMenu]);

          const handleStartPractice = useCallback((mistakes) => {
              if (mistakes.length > 0) {
                  const practiceTopic = {
                      title: "Practice Mistakes",
                      words: mistakes.map(mistake => mistake.word)
                  };
                  setCurrentTopic(practiceTopic);
                  setTopicIndex(-1);
              }
          }, []);

          if (!playerName) {
              return React.createElement(WelcomeScreen, { onNameSubmit: handleNameSubmit });
          }

          if (!currentTopic) {
              return React.createElement(TopicSelector, { playerName: playerName, onSelectTopic: handleSelectTopic });
          }

          return React.createElement(Game, {
              topic: currentTopic,
              onReturnToMenu: handleReturnToMenu,
              onNextTopic: handleNextTopic,
              onStartPractice: handleStartPractice
          });
      };
      
      // Mount the app
      const rootElement = document.getElementById('root');
      const root = ReactDOM.createRoot(rootElement);
      root.render(React.createElement(React.StrictMode, null, React.createElement(App)));

    </script>
  </body>
</html>
